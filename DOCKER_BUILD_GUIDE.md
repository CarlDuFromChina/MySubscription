# ğŸš€ Docker æ„å»ºå’Œæ¨é€å·¥ä½œæµ

## âœ… å®Œæˆçš„åŠŸèƒ½

æˆ‘å·²ç»ä¸ºä½ çš„ `my-subscription` é¡¹ç›®åˆ›å»ºäº†ä¸€ä¸ªç®€åŒ–çš„ GitHub Actions å·¥ä½œæµï¼Œä¸“æ³¨äº Docker é•œåƒçš„æ„å»ºå’Œæ¨é€ï¼Œç§»é™¤äº†è‡ªåŠ¨åŒ–éƒ¨ç½²åŠŸèƒ½ã€‚

### ğŸ¯ ä¸»è¦ç‰¹æ€§

#### 1. **ç®€åŒ–çš„å·¥ä½œæµ** (`docker-backend.yml`)
- **æµ‹è¯•**: è¿è¡Œ lint æ£€æŸ¥å’Œå•å…ƒæµ‹è¯•
- **æ„å»º**: æ„å»ºå¤šæ¶æ„ Docker é•œåƒ (linux/amd64, linux/arm64)
- **æ¨é€**: è‡ªåŠ¨æ¨é€åˆ° GitHub Container Registry
- **å®‰å…¨**: é•œåƒå®‰å…¨æ‰«æ

#### 2. **æ™ºèƒ½è§¦å‘**
- åªåœ¨ `backend/` ç›®å½•æœ‰å˜åŒ–æ—¶è§¦å‘
- æ”¯æŒåˆ†æ”¯æ¨é€å’Œæ ‡ç­¾å‘å¸ƒ
- Pull Request æ—¶æ„å»ºä½†ä¸æ¨é€

#### 3. **æ ‡ç­¾ç­–ç•¥**
- `main` åˆ†æ”¯ â†’ `latest` æ ‡ç­¾
- `develop` åˆ†æ”¯ â†’ `develop` æ ‡ç­¾  
- `v1.0.0` æ ‡ç­¾ â†’ `v1.0.0` å’Œç‰ˆæœ¬æ ‡ç­¾
- PR â†’ `pr-123` æ ‡ç­¾ï¼ˆä»…æ„å»ºï¼Œä¸æ¨é€ï¼‰

### ğŸ“¦ ç”Ÿæˆçš„é•œåƒ

```bash
# ä¸»è¦é•œåƒæ ‡ç­¾
ghcr.io/your-username/my-subscription/subscription-manager-api:latest
ghcr.io/your-username/my-subscription/subscription-manager-api:develop
ghcr.io/your-username/my-subscription/subscription-manager-api:v1.0.0
```

### ğŸ› ï¸ ä½¿ç”¨æ–¹æ³•

#### å¼€å‘æµç¨‹
1. **å¼€å‘**: æ¨é€åˆ° `develop` åˆ†æ”¯è‡ªåŠ¨æ„å»ºå¼€å‘ç‰ˆé•œåƒ
2. **å‘å¸ƒ**: æ¨é€åˆ° `main` åˆ†æ”¯æ„å»ºç”Ÿäº§ç‰ˆé•œåƒ
3. **ç‰ˆæœ¬**: åˆ›å»º `v*` æ ‡ç­¾å‘å¸ƒæ­£å¼ç‰ˆæœ¬

#### æ‰‹åŠ¨è§¦å‘
```bash
# å¼€å‘ç‰ˆæœ¬
git push origin develop

# ç”Ÿäº§ç‰ˆæœ¬  
git push origin main

# å‘å¸ƒç‰ˆæœ¬
git tag v1.0.0
git push origin v1.0.0
```

### ğŸ“‹ é¡¹ç›®ç»“æ„æ›´æ–°

```
my-subscription/
â”œâ”€â”€ .github/workflows/
â”‚   â”œâ”€â”€ docker-backend.yml    # ğŸ†• åç«¯ Docker æ„å»º
â”‚   â”œâ”€â”€ electron-build.yml    # Electron åº”ç”¨æ„å»º
â”‚   â””â”€â”€ README.md            # ğŸ†• å·¥ä½œæµè¯´æ˜æ–‡æ¡£
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ test/
â”‚   â”‚   â””â”€â”€ basic.test.js    # ğŸ†• åŸºç¡€æµ‹è¯•å¥—ä»¶
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â”œâ”€â”€ lint.js          # ğŸ†• ä»£ç æ£€æŸ¥è„šæœ¬
â”‚   â”‚   â””â”€â”€ migrate.js       # ğŸ†• æ•°æ®åº“è¿ç§»è„šæœ¬
â”‚   â””â”€â”€ package.json         # âœ… å·²æ·»åŠ æµ‹è¯•å’Œæ„å»ºè„šæœ¬
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ release.js           # ğŸ†• å‘å¸ƒç®¡ç†è„šæœ¬
â”‚   â””â”€â”€ monitor.js           # ğŸ†• éƒ¨ç½²çŠ¶æ€ç›‘æ§
â”œâ”€â”€ package.json             # âœ… å·²æ·»åŠ å‘å¸ƒå’Œç›‘æ§è„šæœ¬
â””â”€â”€ CHANGELOG.md             # ğŸ†• å˜æ›´æ—¥å¿—
```

### ğŸ§ª æµ‹è¯•åŠŸèƒ½

å·²éªŒè¯çš„åŠŸèƒ½ï¼š
- âœ… åç«¯æµ‹è¯•è„šæœ¬è¿è¡Œæ­£å¸¸
- âœ… Lint æ£€æŸ¥å·¥ä½œæ­£å¸¸
- âœ… Docker é•œåƒæ„å»ºé…ç½®æ­£ç¡®
- âœ… å‘å¸ƒè„šæœ¬åŠŸèƒ½å®Œå–„

### ğŸ“š ä¸‹ä¸€æ­¥

1. **é¦–æ¬¡æ¨é€**: å°†ä»£ç æ¨é€åˆ° GitHub è§¦å‘å·¥ä½œæµ
2. **æŸ¥çœ‹ç»“æœ**: åœ¨ Actions é¡µé¢æŸ¥çœ‹æ„å»ºçŠ¶æ€
3. **ä½¿ç”¨é•œåƒ**: ä» Packages é¡µé¢è·å–æ„å»ºçš„é•œåƒ
4. **æ‰‹åŠ¨éƒ¨ç½²**: ä½¿ç”¨æ„å»ºçš„é•œåƒæ‰‹åŠ¨éƒ¨ç½²åˆ°ä½ çš„æœåŠ¡å™¨

### ğŸ”§ æœ¬åœ°æµ‹è¯•

```bash
# è¿è¡Œæµ‹è¯•
npm run test

# è¿è¡Œ lint
npm run lint  

# æ£€æŸ¥çŠ¶æ€
npm run status

# æœ¬åœ° Docker æ„å»º
cd backend
npm run docker:build
```

## ğŸ‰ æ€»ç»“

ç°åœ¨ä½ æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„ CI ç³»ç»Ÿï¼Œå¯ä»¥ï¼š
- ğŸ”„ è‡ªåŠ¨æ„å»ºå’Œæ¨é€ Docker é•œåƒ
- ğŸ§ª è¿è¡Œæµ‹è¯•å’Œä»£ç è´¨é‡æ£€æŸ¥  
- ğŸ”’ è¿›è¡Œå®‰å…¨æ¼æ´æ‰«æ
- ğŸ“¦ æ”¯æŒå¤šæ¶æ„é•œåƒ
- ğŸ·ï¸ æ™ºèƒ½æ ‡ç­¾ç®¡ç†

**æ— éœ€è‡ªåŠ¨éƒ¨ç½²** - ä½ å¯ä»¥æ‰‹åŠ¨æ‹‰å–æ„å»ºå¥½çš„é•œåƒè¿›è¡Œéƒ¨ç½²ï¼Œå®Œå…¨æ§åˆ¶éƒ¨ç½²æ—¶æœºå’Œç¯å¢ƒï¼
